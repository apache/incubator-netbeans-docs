<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_181) on Fri Sep 14 11:33:53 BST 2018 -->
<title>org.netbeans.spi.editor.mimelookup (MIME Lookup API)</title>
<meta name="date" content="2018-09-14">
<link rel="stylesheet" type="text/css" href="../../../../../javadoc.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="org.netbeans.spi.editor.mimelookup (MIME Lookup API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">org.netbeans.modules.editor.mimelookup/1 1.42.1 </div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/netbeans/api/editor/mimelookup/package-summary.html">Prev&nbsp;Package</a></li>
<li>Next&nbsp;Package</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/netbeans/spi/editor/mimelookup/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.netbeans.spi.editor.mimelookup</h1>
<div class="docSummary">
<div class="block">The SPI allows registering providers of mime type specific <code>Lookup</code>s.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/netbeans/spi/editor/mimelookup/Class2LayerFolder.html" title="interface in org.netbeans.spi.editor.mimelookup">Class2LayerFolder</a>&lt;T&gt;</td>
<td class="colLast">Deprecated
<div class="block"><span class="deprecationComment">Use <a href="../../../../../org/netbeans/spi/editor/mimelookup/MimeLocation.html" title="annotation in org.netbeans.spi.editor.mimelookup"><code>MimeLocation</code></a> instead</span></div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../org/netbeans/spi/editor/mimelookup/InstanceProvider.html" title="interface in org.netbeans.spi.editor.mimelookup">InstanceProvider</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Provider of the instance of the given class.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/netbeans/spi/editor/mimelookup/MimeDataProvider.html" title="interface in org.netbeans.spi.editor.mimelookup">MimeDataProvider</a></td>
<td class="colLast">
<div class="block">Provides a <code>Lookup</code> for the specific <code>MimePath</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../org/netbeans/spi/editor/mimelookup/MimeLookupInitializer.html" title="interface in org.netbeans.spi.editor.mimelookup">MimeLookupInitializer</a></td>
<td class="colLast">Deprecated
<div class="block"><span class="deprecationComment">Use <a href="../../../../../org/netbeans/spi/editor/mimelookup/MimeDataProvider.html" title="interface in org.netbeans.spi.editor.mimelookup"><code>MimeDataProvider</code></a> instead.</span></div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Annotation Types Summary table, listing annotation types, and an explanation">
<caption><span>Annotation Types Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Annotation Type</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/netbeans/spi/editor/mimelookup/MimeLocation.html" title="annotation in org.netbeans.spi.editor.mimelookup">MimeLocation</a></td>
<td class="colLast">
<div class="block">Should be used for services that are to be registered to the MimeLookup and that
 need a specific subfolder to be used for the registration (optional, mime-type root
 will be searched if this annotation is missing)</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package org.netbeans.spi.editor.mimelookup Description">Package org.netbeans.spi.editor.mimelookup Description</h2>
<div class="block">The SPI allows registering providers of mime type specific <code>Lookup</code>s.
The <code>MimeDataProvider</code> interface can be used to implement such a
provider and register it among the services in the default lookup. The editor/mimelookup
module will consult all registered <code>MimeDataProvider</code>s when creating
a <code>Lookup</code> for a specific <code>MimePath</code>.

<a name="defaultMimeDataProvider"/><h3>Default MimeDataProvider</h3>

<p>The module itself provides a default implementation of the <code>MimeDataProvider</code>,
which creates <code>Lookup</code>s from the data registered in a hierachical
structure of folders on the system filesystem.
</p>

<p>The hierarchy starts with the 'Editors' folder and then contains subfolders for
each mime type that has some registered objects. Since each mime type is uniquely
identified by its <code>MimePath</code> the string represantation of the <code>MimePath</code>
can be used as a filesystem path to the folder holding objects registered for
that mime type. For example the 'text/x-java' mime type embedded in the 'text/x-jsp'
mime type is represented by the 'text/x-jsp/text/x-java' mime path and
the objects/settings specific for this mime type can be registered in the
'Editors/text/x-jsp/text/x-java' folder.

<p>The empty <code>MimePath</code> refers to the 'Editors' folder iteslf.
</p>

<!-- 
<p>While it is useful to be able to register objects independently for each mime
type it seems logical to expect objects registered for the 'text/x-java' mime type
to be visible for the 'text/x-jsp/text/x-java' mime type as well. Therefore the
default <code>MimeDataProvider</code> chains the <code>Lookup</code> provided
for a particular embedded mime type with the <code>Lookup</code> of the unembedded
version of that mime type.
</p>

<p>As an example of this chaining you can think of the
settings or services available for a plain java editor that will provide good defaults
for the java scriplets embedded in a jsp page allowing the java scriplets editor
to use those settings or override them with its own version.
</p>
-->

<p>The <code>Lookup</code> provided for a mime path is in fact a chain of
<code>Lookup</code>s for all mime paths that can be created from the original
mime path by cutting off its mime type components from the end. So, for example
the <code>Lookup</code> for the 'text/x-jsp/text/x-java' mime path is made up of
three different <code>Lookup</code>s using the following folders:
</p>

<pre>
    Editors/text/x-jsp/text/x-java
    Editors/text/x-jsp
    Editors
</pre>

<p>The default <code>MimeDataProvider</code> allows registering implementations of
the <code>Class2LayerFolder</code> interface in order to supply additional
information about the location of instances registered in the mime type folders.
Each <code>Class2LayerFolder</code> implementation can specify that instances of
a certain class will be registered in a special subfolder. The <code>Lookup</code>
created by the default <code>MimeDataProvider</code> will then look into the
subfolders rather than to the usual mime type folders when looking for instances
of that class. An example can be instances of the <code>FoldManager</code> class
that are registered in the <code>foldManager</code> subfolders. The <code>Lookup</code>s
hierarchy in this case uses the folders below:
</p>

<pre>
    Editors/text/x-jsp/text/x-java/foldManager
    Editors/text/x-jsp/foldManager
    Editors/foldManager
</pre>

<h3>Compound MIME types</h3>

<p>The default <code>MimeDataProvider</code> supports compound mime types, which
are the mime types that have two parts separated by a plus sign ('+'). The
compound mime types are heavily used for describing different types of XML files.
For example an Ant build script's mime type is text/x-ant+xml, which means that
the file is an XML file, but not an ordinary XML file. It's a build script.
</p>

<p>From the editor's point of view a file with a compound mime type should offer
the behavior of the default mime type (e.g. text/xml) plus special behaviors
specific for its original mime type (e.g. text/x-ant+xml). Therefore a <code>Lookup</code>
provided for a mime path that contains a compound mime type will collect settings
and services from both the folders belonging to the compound mime type and
the folders belonging to its default part. The example below shows the list of
folders comprising a <code>Lookup</code> for the 'text/x-ant+xml/text/x-java'
mime path.
</p>

<pre>
    Editors/text/x-ant+xml/text/x-java
    Editors/text/x-ant+xml
    Editors/text/xml/text/x-java
    Editors/text/xml
    Editors
</pre>

<h3>Ordering and hiding files</h3>

<p>When registering instances in the mime path folders it is possible to use
<code>position</code> attributes to order the files the same way as you would do it in any other
files in a module XML layer. The attributes however will be resolved after all
the folders belonging to a mime path are merged. Therefore it is possible to
use attributes that define position relatively to a file in a parent (embedding)
mime type.
</p>

<pre>
&lt;folder name="Editors"&gt;
  &lt;folder name="Popup"&gt;
    &lt;file name="org-openide-actions-CutAction.instance">&lt;attr name="position" intvalue="100"/>&lt;/file>
    &lt;file name="org-openide-actions-CopyAction.instance">&lt;attr name="position" intvalue="200"/>&lt;/file>
    &lt;file name="org-openide-actions-PasteAction.instance">&lt;attr name="position" intvalue="300"/>&lt;/file>
  &lt;/folder&gt;
  &lt;folder name="text"&gt;
    &lt;folder name="x-java"&gt;
      &lt;folder name="Popup">
        &lt;file name="org-netbeans-modules-project-ui-RunSingle">&lt;attr name="position" intvalue="400"/>&lt;/file>
      &lt;/folder&gt;
    &lt;/folder&gt;
  &lt;/folder&gt;
&lt;/folder&gt;
</pre>

<p>It is also possible to influence the default inheritance of files from
folders belonging to a parent (embedding) mime type and mask them out by defining
a 'hidden file' in the child mime type folder. Hidden files are marked by
a special attribute called <code>hidden</code> with a booleanValue equal to 'true'.
The example below hides the editor's global CopyAction in documents with the
'text/x-java' mime type.
</p>

<pre>
&lt;folder name="Editors"&gt;
  &lt;folder name="Popup"&gt;
    &lt;file name="org-openide-actions-CutAction.instance" /&gt;
    &lt;file name="org-openide-actions-CopyAction.instance" /&gt;
    &lt;file name="org-openide-actions-PasteAction.instance" /&gt;
  &lt;/folder&gt;
  &lt;folder name="text"&gt;
    &lt;folder name="x-java"&gt;
      &lt;file name="org-openide-actions-CopyAction.instance" &gt;
        &lt;attr name="hidden" booleanValue="true" /&gt;
      &lt;/file&gt;
    &lt;/folder&gt;
  &lt;/folder&gt;
&lt;/folder&gt;
</pre>

<p>Please note that appending '_hidden' to the name of the
file does not work, because such a file is made hidden by the XML filesystem
implementation when the module layer is loaded and therefore such a file is not visible
to the merging mechanism implemented in the mimelookup module.
</p></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">org.netbeans.modules.editor.mimelookup/1 1.42.1 </div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/netbeans/api/editor/mimelookup/package-summary.html">Prev&nbsp;Package</a></li>
<li>Next&nbsp;Package</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/netbeans/spi/editor/mimelookup/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><span class="footnote">Built on September 14 2018.&nbsp;&nbsp;|&nbsp;&nbsp;         Copyright &#169; 2017-2018 Apache Software Foundation. All Rights Reserved.</span></small></p>
</body>
</html>
